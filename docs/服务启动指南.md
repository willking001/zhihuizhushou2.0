# 服务启动指南

本文档提供了智慧助手2.0系统各个服务的启动命令和说明。

## 前端服务

### Vue.js 开发服务器

```bash
# 进入前端目录
cd frontend

# 安装依赖（首次运行）
npm install

# 启动开发服务器
npm run dev
```

**服务信息：**
- 端口：5173
- 访问地址：http://localhost:5173/
- 热重载：支持

### 前端生产构建

```bash
# 构建生产版本
npm run build

# 预览生产构建
npm run preview
```

## 后端服务

### Spring Boot 后端服务

```bash
# 进入后端目录
cd backend

# 使用Maven启动（开发模式）
./mvnw spring-boot:run

# 或者使用Maven Wrapper（Windows）
mvnw.cmd spring-boot:run

# 打包并运行
./mvnw clean package
java -jar target/dianxiaozhu-backend-*.jar
```

**服务信息：**
- 端口：8080
- API地址：http://localhost:8080/api/
- 数据库：需要配置MySQL连接

### Python 集成服务

```bash
# 进入Python服务目录
cd dianxiaozhu2.0

# 安装依赖（首次运行）
pip install -r requirements.txt

# 启动集成服务
python integrated_service.py

# 启动微信增强服务
python wechat_enhanced.py

# 启动现代化桌面应用
python modern_grid_desktop_app.py
```

**服务信息：**
- 集成服务：提供AI智能代理功能
- 微信服务：处理微信消息和自动回复
- 桌面应用：提供图形化管理界面

## 数据库服务

### MySQL 数据库

```bash
# 启动MySQL服务（Windows）
net start mysql

# 连接数据库
mysql -u root -p

# 创建数据库（首次运行）
CREATE DATABASE dianxiaozhu;
```

## Docker 容器化部署

### 使用 Docker Compose

```bash
# 启动所有服务
docker-compose up -d

# 查看服务状态
docker-compose ps

# 停止所有服务
docker-compose down

# 重新构建并启动
docker-compose up --build -d
```

## 快速启动脚本

### 开发环境启动

```bash
# Windows 批处理脚本
start-dev.bat

# 手动启动所有服务
# 1. 启动数据库
net start mysql

# 2. 启动后端服务
cd backend && mvnw.cmd spring-boot:run

# 3. 启动前端服务（新终端）
cd frontend && npm run dev

# 4. 启动Python服务（新终端）
cd dianxiaozhu2.0 && python integrated_service.py
```

### 停止服务

```bash
# Windows 批处理脚本
stop-dev.bat

# 手动停止
# Ctrl+C 停止各个终端中的服务
# 或者关闭对应的终端窗口
```

## 环境检查

### 检查环境配置

```bash
# 运行环境检查脚本
check-env.bat

# 手动检查
node --version
npm --version
java --version
python --version
mysql --version
```

## 端口配置

| 服务 | 端口 | 说明 |
|------|------|------|
| 前端开发服务器 | 5173 | Vue.js Vite 开发服务器 |
| 后端API服务 | 8080 | Spring Boot 应用 |
| MySQL数据库 | 3306 | 数据库服务 |
| Nginx代理 | 80/443 | 反向代理（生产环境） |

## 常见问题

### 端口冲突

如果遇到端口被占用的问题：

```bash
# 查看端口占用（Windows）
netstat -ano | findstr :5173
netstat -ano | findstr :8080

# 结束占用端口的进程
taskkill /PID <进程ID> /F
```

### 依赖安装问题

```bash
# 清理npm缓存
npm cache clean --force

# 删除node_modules重新安装
rmdir /s node_modules
npm install

# Python依赖问题
pip install --upgrade pip
pip install -r requirements.txt --force-reinstall
```

### 数据库连接问题

1. 确保MySQL服务已启动
2. 检查数据库配置文件中的连接信息
3. 确认数据库用户权限
4. 检查防火墙设置

## 日志查看

### 应用日志

```bash
# Spring Boot 日志
tail -f backend/app.log

# Python 服务日志
# 日志通常输出到控制台，可以重定向到文件
python integrated_service.py > logs/integrated.log 2>&1
```

### 系统日志

```bash
# Windows 事件查看器
eventvwr.msc

# 或查看特定服务日志
# 在各服务的日志目录中查看
```

---

**注意事项：**

1. 首次运行需要安装所有依赖
2. 确保数据库服务已启动并正确配置
3. 开发环境建议按顺序启动：数据库 → 后端 → 前端 → Python服务
4. 生产环境建议使用Docker容器化部署
5. 定期备份数据库和配置文件